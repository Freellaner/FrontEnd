/* ==========================================================================
   1. LAYOUT GERAL E VARIÁVEIS
   ========================================================================== */
/* Suas variáveis :root e body.dark-mode permanecem as mesmas */
:root {
  --cor-fundo: #F9FAFB; --cor-fundo-secao: #FFFFFF; --cor-texto: #111827; --cor-texto-secundario: #6B7280;
  --cor-texto-branco: #FFFFFF; --cor-primaria: #2563EB; --cor-borda: #E5E7EB; --sombra-card: 0 4px 10px rgba(0, 0, 0, 0.04);
  --sombra-card-hover: 0 8px 25px rgba(37, 99, 235, 0.15); --switch-bg-off: #ccc; --switch-circle-off: #f9f9f9;
  --switch-bg-on: var(--cor-primaria); --switch-circle-on: #f9f9f9; --cor-sucesso: #10B981; --cor-aviso: #FBBF24; --cor-negativo: #F43F5E;
}
body.dark-mode {
  --cor-fundo: #0D1117; --cor-fundo-secao: #161B22; --cor-texto: #F0F6FC; --cor-texto-secundario: #8B949E;
  --cor-primaria: #F59E0B; --cor-borda: #30363D; --sombra-card: 0 0 0 1px #30363D;
  --sombra-card-hover: 0 0 0 1px var(--cor-primaria), 0 0 20px rgba(245, 158, 11, 0.2); --switch-bg-off: #555;
  --switch-circle-off: #bbb; --switch-bg-on: var(--cor-primaria); --switch-circle-on: #111827;
}
body { background-color: var(--cor-fundo); color: var(--cor-texto); font-family: 'Poppins', sans-serif; /* ... */ }

.dashboard-layout { display: flex; min-height: 100vh; }
.content-wrapper { display: flex; flex-direction: column; flex-grow: 1; width: calc(100% - 260px); transition: width 0.3s ease; }
.dashboard-main { flex-grow: 1; padding: 1.5rem 2rem; }

/* ==========================================================================
   2. SIDEBAR
   ========================================================================== */
.sidebar {
    background-color: var(--cor-fundo-secao);
    border-right: 1px solid var(--cor-borda);
    padding: 1rem;
    display: flex;
    flex-direction: column;
    transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0;
}
.sidebar.collapsed { width: 80px; }
.sidebar-header {
    font-size: 1.5rem; font-weight: 700; color: var(--cor-primaria); padding: 1rem 0.5rem; text-align: center; white-space: nowrap;
}
.sidebar-nav { margin-top: 2rem; flex-grow: 1; }
.nav-item {
    display: flex; align-items: center; gap: 1rem; padding: 0.9rem; margin-bottom: 0.5rem; border-radius: 8px;
    color: var(--cor-texto-secundario); text-decoration: none; font-weight: 500; white-space: nowrap; transition: all 0.2s ease;
}
.sidebar.collapsed .nav-item { justify-content: center; }
.nav-item:hover { background-color: var(--cor-borda); color: var(--cor-texto); }
.nav-item.active { background-color: var(--cor-primaria); color: var(--cor-texto-branco); }
.nav-item svg { font-size: 1.25rem; flex-shrink: 0; }
.sidebar-footer { padding-top: 1rem; border-top: 1px solid var(--cor-borda); }

/* ==========================================================================
   3. HEADER
   ========================================================================== */
.dashboard-header {
    display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem;
    background-color: var(--cor-fundo-secao); border-bottom: 1px solid var(--cor-borda); position: sticky; top: 0; z-index: 10;
}
.header-left { display: flex; align-items: center; gap: 1rem; }
.menu-toggle { background: none; border: none; cursor: pointer; color: var(--cor-texto); font-size: 1.5rem; }
.welcome-section h1 { font-size: 1.5rem; margin: 0; }
.header-center { flex-grow: 1; max-width: 500px; }
.search-bar { display: flex; align-items: center; gap: 0.5rem; background-color: var(--cor-fundo); border-radius: 8px; padding: 0.6rem 1rem; border: 1px solid var(--cor-borda); transition: all 0.2s ease; }
.search-bar:focus-within { border-color: var(--cor-primaria); box-shadow: 0 0 0 2px color-mix(in srgb, var(--cor-primaria) 20%, transparent); }
.search-bar input { background: none; border: none; outline: none; width: 100%; color: var(--cor-texto); }
.header-actions-dashboard { display: flex; align-items: center; gap: 1rem; }
.icon-button { background: none; border: none; font-size: 1.25rem; color: var(--cor-texto-secundario); cursor: pointer; position: relative; }
.notification-dot { position: absolute; top: 2px; right: 2px; width: 8px; height: 8px; background-color: var(--cor-negativo); border-radius: 50%; border: 1px solid var(--cor-fundo-secao); }
.user-menu { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; }
.user-menu img { width: 36px; height: 36px; border-radius: 50%; }

/* ... Estilos do Switch ... */
.switch { position: relative; display: inline-block; width: 50px; height: 28px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--switch-bg-off); transition: .4s; border-radius: 28px; }
.slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: var(--switch-circle-off); transition: .4s; border-radius: 50%; }
input:checked + .slider { background-color: var(--switch-bg-on); }
input:checked + .slider:before { transform: translateX(22px); background-color: var(--switch-circle-on); }

/* ==========================================================================
   4. GRID E CARDS
   ========================================================================== */
.dashboard-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; }
.dashboard-card { background-color: var(--cor-fundo-secao); border: 1px solid var(--cor-borda); border-radius: 16px; padding: 1.5rem; box-shadow: var(--sombra-card); display: flex; flex-direction: column; }

.card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
.card-header h3 { font-size: 1rem; margin: 0; font-weight: 500; color: var(--cor-texto-secundario); }

.kpi-card .card-header { margin-bottom: 0.5rem; }
.kpi-card .card-icon { font-size: 1.5rem; color: var(--cor-primaria); }
.kpi-card .card-body { margin-top: auto; }
.kpi-card .card-value { font-size: 2rem; font-weight: 700; display: block; }
.kpi-card .card-change { font-size: 0.875rem; font-weight: 500; }
.card-change.positive { color: var(--cor-sucesso); }
.card-change.negative { color: var(--cor-negativo); }

.card-grafico { grid-column: span 2; grid-row: span 2; }
.card-projetos { grid-column: span 1; grid-row: span 1; }
.card-atividades { grid-column: span 2; grid-row: span 2; }
.chart-container { flex-grow: 1; position: relative; }
.chart-container canvas { position: absolute; top: 0; left: 0; width: 100% !important; height: 100% !important; }

.activity-feed { list-style: none; padding: 0; margin: 0; }
.feed-item { display: flex; align-items: center; gap: 1rem; padding: 0.8rem 0; border-bottom: 1px solid var(--cor-borda); }
.feed-item:last-child { border-bottom: none; }
.feed-icon { font-size: 1.25rem; }
.feed-icon.positive { color: var(--cor-sucesso); }
.feed-icon.negative { color: var(--cor-negativo); }
.feed-item p { margin: 0; flex-grow: 1; font-size: 0.9rem; }
.feed-item span { font-size: 0.8rem; color: var(--cor-texto-secundario); margin-left: auto; }
.empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: var(--cor-texto-secundario); }
.empty-state svg { font-size: 2.5rem; margin-bottom: 1rem; }

/* ==========================================================================
   5. SKELETON LOADING
   ========================================================================== */
.skeleton { background-color: var(--cor-borda); border-radius: 8px; animation: shimmer 1.5s infinite linear; }
.skeleton-text { height: 1em; }
.skeleton-avatar { width: 36px; height: 36px; border-radius: 50%; }
@keyframes shimmer {
  0% { background-color: var(--cor-borda); }
  50% { background-color: color-mix(in srgb, var(--cor-borda) 80%, white); }
  100% { background-color: var(--cor-borda); }
}

/* ==========================================================================
   6. RESPONSIVIDADE
   ========================================================================== */
@media (max-width: 1200px) { /* Tablet */
    .content-wrapper { width: calc(100% - 80px); }
    .header-center { display: none; }
    .dashboard-grid { grid-template-columns: 1fr 1fr; }
    .card-grafico, .card-atividades { grid-column: span 2; }
    .card-projetos { grid-column: span 2; }
}
@media (max-width: 768px) { /* Mobile */
    .dashboard-layout { flex-direction: column; }
    .sidebar { width: 100%; height: auto; flex-direction: row; border-right: none; border-bottom: 1px solid var(--cor-borda); padding: 0.5rem; }
    .sidebar-header, .sidebar-footer { display: none; }
    .sidebar-nav { width: 100%; display: flex; justify-content: space-around; margin-top: 0; }
    .nav-item .nav-text { display: none; }
    .nav-item { margin: 0; }
    .content-wrapper { width: 100%; }
    .dashboard-header { flex-wrap: wrap; gap: 1rem; }
    .welcome-section { order: 1; }
    .header-actions-dashboard { order: 2; }
    .header-center { order: 3; width: 100%; max-width: none; }
    .dashboard-main { padding: 1rem; }
    .dashboard-grid { grid-template-columns: 1fr; }
    .card-grafico, .card-atividades, .card-projetos { grid-column: span 1; }
}